#!/usr/bin/env node

const fs = require("fs")
const path = require("path")

// Movie/Music themed puzzle designs
// Each design is a 2D array where each cell is either 0 (empty) or a color value

// 5x5 Easy puzzles (replacing DD Fist, Diskarmor, Dragon Key)
const easy5x5 = {
    "042_double_dragon.json": {
        id: "easy_042",
        name: "Music Note",
        difficulty: "easy",
        design: [
            [0, 0, 1, 1, 0],
            [0, 0, 1, 0, 0],
            [0, 0, 1, 0, 0],
            [1, 1, 1, 0, 0],
            [1, 1, 0, 0, 0]
        ],
        colors: [
            [0, 0, 0x000000, 0x000000, 0],
            [0, 0, 0x000000, 0, 0],
            [0, 0, 0x000000, 0, 0],
            [0x000000, 0x000000, 0x000000, 0, 0],
            [0x000000, 0x000000, 0, 0, 0]
        ]
    },
    "043_rygar_shield.json": {
        id: "easy_043",
        name: "Film Reel",
        difficulty: "easy",
        design: [
            [1, 1, 1, 1, 1],
            [1, 0, 1, 0, 1],
            [1, 1, 1, 1, 1],
            [1, 0, 1, 0, 1],
            [1, 1, 1, 1, 1]
        ],
        colors: [
            [0x333333, 0x333333, 0x333333, 0x333333, 0x333333],
            [0x333333, 0, 0x333333, 0, 0x333333],
            [0x333333, 0x333333, 0x333333, 0x333333, 0x333333],
            [0x333333, 0, 0x333333, 0, 0x333333],
            [0x333333, 0x333333, 0x333333, 0x333333, 0x333333]
        ]
    },
    "045_adventure_dragon.json": {
        id: "easy_045",
        name: "Star",
        difficulty: "easy",
        design: [
            [0, 0, 1, 0, 0],
            [1, 1, 1, 1, 1],
            [0, 1, 1, 1, 0],
            [0, 1, 0, 1, 0],
            [1, 0, 0, 0, 1]
        ],
        colors: [
            [0, 0, 0xFFD700, 0, 0],
            [0xFFD700, 0xFFD700, 0xFFD700, 0xFFD700, 0xFFD700],
            [0, 0xFFD700, 0xFFD700, 0xFFD700, 0],
            [0, 0xFFD700, 0, 0xFFD700, 0],
            [0xFFD700, 0, 0, 0, 0xFFD700]
        ]
    }
}

// 10x10 Medium puzzles
const medium10x10 = {
    "003_sonic_face.json": {
        id: "medium_003",
        name: "Treble Clef",
        difficulty: "medium",
        design: [
            [0, 0, 0, 1, 1, 1, 0, 0, 0, 0],
            [0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
            [0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
            [0, 0, 0, 0, 0, 1, 1, 0, 0, 0],
            [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
            [0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
            [0, 0, 1, 0, 0, 1, 0, 0, 0, 0],
            [0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 0, 0, 0, 0, 0]
        ],
        color: 0x000000
    },
    "014_metroid_samus.json": {
        id: "medium_014",
        name: "Popcorn",
        difficulty: "medium",
        design: [
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0]
        ],
        colors: "popcorn"
    },
    "022_bubble_bobble_dino.json": {
        id: "medium_022",
        name: "Vinyl Record",
        difficulty: "medium",
        design: [
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 0, 0, 1, 1, 1, 1],
            [1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
            [1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
            [1, 1, 1, 1, 0, 0, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0]
        ],
        colors: "vinyl"
    },
    "026_punch_out_mac.json": {
        id: "medium_026",
        name: "Movie Camera",
        difficulty: "medium",
        design: [
            [1, 1, 0, 0, 0, 0, 0, 1, 1, 0],
            [1, 1, 0, 0, 0, 0, 0, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [0, 1, 1, 0, 0, 1, 1, 1, 1, 1],
            [0, 1, 1, 0, 0, 1, 1, 1, 1, 1],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
            [1, 1, 0, 0, 0, 0, 0, 1, 1, 0],
            [1, 1, 0, 0, 0, 0, 0, 1, 1, 0]
        ],
        color: 0x333333
    },
    "027_ninja_gaiden_ryu.json": {
        id: "medium_027",
        name: "Headphones",
        difficulty: "medium",
        design: [
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 1, 1, 0, 0, 0, 0, 1, 1, 0],
            [1, 1, 0, 0, 0, 0, 0, 0, 1, 1],
            [1, 1, 0, 0, 0, 0, 0, 0, 1, 1],
            [1, 1, 0, 0, 0, 0, 0, 0, 1, 1],
            [1, 1, 0, 0, 0, 0, 0, 0, 1, 1],
            [1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
            [1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
            [1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
            [0, 1, 1, 0, 0, 0, 0, 1, 1, 0]
        ],
        color: 0x1A1A1A
    },
    "028_ice_climber_popo.json": {
        id: "medium_028",
        name: "Clapperboard",
        difficulty: "medium",
        design: [
            [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
            [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ],
        colors: "clapperboard"
    },
    "031_kid_icarus_pit.json": {
        id: "medium_031",
        name: "Spotlight",
        difficulty: "medium",
        design: [
            [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
            [0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
        ],
        colors: "spotlight"
    },
    "032_rygar_warrior.json": {
        id: "medium_032",
        name: "Microphone",
        difficulty: "medium",
        design: [
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
            [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
            [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
            [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0]
        ],
        colors: "microphone"
    },
    "039_pitfall_harry.json": {
        id: "medium_039",
        name: "Piano Keys",
        difficulty: "medium",
        design: [
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 1, 1, 0, 1, 0, 1, 1, 0],
            [1, 0, 1, 1, 0, 1, 0, 1, 1, 0],
            [1, 0, 1, 1, 0, 1, 0, 1, 1, 0],
            [1, 0, 1, 1, 0, 1, 0, 1, 1, 0],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ],
        colors: "piano"
    },
    "040_spy_hunter_full.json": {
        id: "medium_040",
        name: "Director Chair",
        difficulty: "medium",
        design: [
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
            [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
            [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
            [0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
        ],
        colors: "chair"
    },
    "047_ghosts_n_goblins.json": {
        id: "medium_047",
        name: "Drama Masks",
        difficulty: "medium",
        design: [
            [0, 1, 1, 1, 0, 0, 1, 1, 1, 0],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 1, 0, 1, 1, 0, 1, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 0, 0, 1, 1, 1, 1, 1, 1],
            [0, 1, 1, 1, 0, 0, 1, 1, 1, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ],
        colors: "masks"
    }
}

// 15x15 Hard puzzles
const hard15x15 = {
    "016_castlevania_cross.json": {
        id: "hard_016",
        name: "Oscar Statue",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,0,1,1,0,1,0,1,1,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0]
        ],
        color: 0xFFD700
    },
    "017_contra_spread.json": {
        id: "hard_017",
        name: "Grammy Award",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,1,1,0,0,0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0,0,0,1,1,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0]
        ],
        color: 0xFFD700
    },
    "022_zelda_sword_full.json": {
        id: "hard_022",
        name: "Film Strip",
        difficulty: "hard",
        design: [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,1,1,1,1,1,1,1,1,1,1,1,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,1,1,1,1,1,1,1,1,1,1,1,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ],
        color: 0x333333
    },
    "024_gradius_vic_viper.json": {
        id: "hard_024",
        name: "Boom Box",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,1,0,1,1,1,0,1,0,1,1,1,0,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,1,0,1,1,0,0,1,0,0,1,1,0,1,0],
            [0,1,1,0,0,1,1,1,1,1,0,0,1,1,0],
            [0,1,1,0,1,1,1,1,1,1,1,0,1,1,0],
            [0,1,1,0,1,1,1,1,1,1,1,0,1,1,0],
            [0,1,1,0,0,1,1,1,1,1,0,0,1,1,0],
            [0,1,0,1,1,0,0,1,0,0,1,1,0,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        colors: "boombox"
    },
    "025_bubble_bobble_dragon.json": {
        id: "hard_025",
        name: "Electric Guitar",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],
            [0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,1,1,1,1,0,1,1,1,0,0,0,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
            [0,1,1,1,1,0,0,1,1,1,1,0,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,0,0,0,0,0,0]
        ],
        colors: "guitar"
    },
    "028_punch_out_boxing.json": {
        id: "hard_028",
        name: "Saxophone",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,1,1,0],
            [0,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],
            [0,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
            [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],
            [0,1,1,1,1,1,0,0,0,0,0,0,0,0,0]
        ],
        color: 0xFFD700
    },
    "029_ninja_gaiden_full.json": {
        id: "hard_029",
        name: "Drum Kit",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,1,1,1,0,0,0,0,0,0,0,1,1,1,0],
            [1,1,1,1,1,0,0,0,0,0,1,1,1,1,1],
            [1,1,1,1,1,0,0,0,0,0,1,1,1,1,1],
            [1,1,1,1,1,0,0,0,0,0,1,1,1,1,1],
            [0,1,1,1,0,0,0,0,0,0,0,1,1,1,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0]
        ],
        colors: "drums"
    },
    "030_ice_climber_full.json": {
        id: "hard_030",
        name: "Movie Ticket",
        difficulty: "hard",
        design: [
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],
            [1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],
            [1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0]
        ],
        colors: "ticket"
    },
    "031_balloon_fight_xl.json": {
        id: "hard_031",
        name: "Cassette Tape",
        difficulty: "hard",
        design: [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1,1,1,1,0,0,0,1,1],
            [1,1,0,1,0,1,1,1,1,1,0,1,0,1,1],
            [1,1,0,0,0,1,1,1,1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],
            [1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],
            [1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ],
        colors: "cassette"
    },
    "032_double_dragon_xl.json": {
        id: "hard_032",
        name: "Grand Piano",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],
            [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],
            [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,1,0]
        ],
        colors: "grandpiano"
    },
    "033_kid_icarus_xl.json": {
        id: "hard_033",
        name: "Trumpet",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,1,1,1,1,0],
            [0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],
            [1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,0,0,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        color: 0xFFD700
    },
    "034_rygar_xl.json": {
        id: "hard_034",
        name: "Disco Ball",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,1,1,0,1,0,1,0,1,0,1,0,1,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,1,1,0,1,0,1,0,1,0,1,0,1,1,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0]
        ],
        colors: "discoball"
    },
    "035_defender_xl.json": {
        id: "hard_035",
        name: "Concert Stage",
        difficulty: "hard",
        design: [
            [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ],
        colors: "stage"
    },
    "039_dig_dug_xl.json": {
        id: "hard_039",
        name: "Amplifier",
        difficulty: "hard",
        design: [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,0,1,1,0,0,0,1,1,0,0,1,1],
            [1,1,0,0,1,1,0,0,0,1,1,0,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,1,1,0,1,1,1,0,1,1,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,1,1,1,1,1,0,0,0,0,1],
            [1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],
            [1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],
            [1,0,0,0,0,1,1,1,1,1,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ],
        color: 0x1A1A1A
    },
    "041_pitfall_xl.json": {
        id: "hard_041",
        name: "Synthesizer",
        difficulty: "hard",
        design: [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
            [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,0,1,0,1,0,1,0,1,0,1,0,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ],
        colors: "synth"
    },
    "048_simon_belmont_xl.json": {
        id: "hard_048",
        name: "Turntable",
        difficulty: "hard",
        design: [
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],
            [1,1,0,1,1,1,1,1,1,1,1,1,0,1,1],
            [1,1,0,1,1,1,1,1,1,1,1,1,0,1,1],
            [1,1,1,1,1,1,0,0,0,1,1,1,1,1,1],
            [1,1,1,1,1,1,0,1,0,1,1,1,1,1,1],
            [1,1,1,1,1,1,0,0,0,1,1,1,1,1,1],
            [1,1,0,1,1,1,1,1,1,1,1,1,0,1,1],
            [1,1,0,1,1,1,1,1,1,1,1,1,0,1,1],
            [1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0]
        ],
        colors: "turntable"
    }
}

// Helper to generate picture array from design and color scheme
function generatePicture(design, colorSpec) {
    const height = design.length
    const width = design[0].length
    const picture = []

    for (let y = 0; y < height; y++) {
        picture[y] = []
        for (let x = 0; x < width; x++) {
            if (design[y][x] === 1) {
                if (typeof colorSpec === "number") {
                    picture[y][x] = colorSpec
                } else if (Array.isArray(colorSpec)) {
                    picture[y][x] = colorSpec[y][x]
                } else if (typeof colorSpec === "string") {
                    picture[y][x] = getSpecialColor(colorSpec, x, y, width, height, design)
                }
            } else {
                picture[y][x] = 0
            }
        }
    }
    return picture
}

function getSpecialColor(scheme, x, y, width, height, design) {
    switch (scheme) {
        case "popcorn":
            if (y < 4) return 0xFFF8DC // cream popcorn
            return 0xFF0000 // red container
        case "vinyl":
            if (y >= 3 && y <= 6 && x >= 3 && x <= 6) return 0xFF0000 // red label
            return 0x1A1A1A // black vinyl
        case "clapperboard":
            if (y < 2) return (x + y) % 2 === 0 ? 0x1A1A1A : 0xFFFFFF
            return 0x1A1A1A
        case "spotlight":
            return 0xFFFF00 // yellow light
        case "microphone":
            if (y < 5) return 0xC0C0C0 // silver head
            return 0x1A1A1A // black handle
        case "piano":
            if (design[y][x] === 1 && y >= 2 && y <= 5 && (x === 1 || x === 4 || x === 6 || x === 9)) {
                return 0x1A1A1A // black keys
            }
            return 0xFFFFFF // white keys
        case "chair":
            if (y === 2 || y === 3) return 0xFF0000 // red seat back
            return 0x8B4513 // brown wood
        case "masks":
            if (x < 5) return 0xFFD700 // gold happy mask
            return 0xC0C0C0 // silver sad mask
        case "boombox":
            return 0x1A1A1A // black
        case "guitar":
            if (y < 8) return 0x8B4513 // brown neck
            return 0xFF0000 // red body
        case "drums":
            if (y < 5) return 0xC0C0C0 // silver cymbal
            if (x < 5 || x > 9) return 0xFF0000 // red side drums
            return 0xFFFFFF // white bass drum
        case "ticket":
            if ((y >= 5 && y <= 6) || (y >= 8 && y <= 9)) return 0x1A1A1A // text lines
            return 0xFFD700 // gold ticket
        case "cassette":
            if (y >= 10 && y <= 12) return 0x8B4513 // brown tape window
            if ((y >= 2 && y <= 4) && ((x >= 2 && x <= 4) || (x >= 10 && x <= 12))) return 0x1A1A1A // reels
            return 0xC0C0C0 // silver body
        case "grandpiano":
            if (y >= 9 && y <= 11 && design[y][x] === 1 && x % 2 === 0 && x > 1 && x < 14) {
                return 0x1A1A1A // black keys
            }
            if (y >= 9) return 0xFFFFFF // white keys
            return 0x1A1A1A // black body
        case "discoball":
            return (x + y) % 2 === 0 ? 0xC0C0C0 : 0xFFFFFF
        case "stage":
            if (y < 7) return 0xFFFF00 // yellow spotlight area
            if (y >= 11 && design[y][x] === 1) {
                return y % 2 === 1 ? 0xFF0000 : 0x8B4513
            }
            return 0x8B4513 // brown stage
        case "synth":
            if (y >= 7 && y <= 10) return 0xFFFFFF // white keys
            return 0x1A1A1A // black body
        case "turntable":
            if (y >= 6 && y <= 8 && x >= 6 && x <= 8) return 0xFF0000 // red center
            if ((y >= 3 && y <= 4 && (x === 3 || x === 4 || x === 10 || x === 11)) ||
                (y >= 10 && y <= 11 && (x === 3 || x === 4 || x === 10 || x === 11))) {
                return 0xC0C0C0 // silver buttons
            }
            return 0x1A1A1A // black
        default:
            return 0x4169e1
    }
}

// Write puzzle file
function writePuzzle(dir, filename, puzzleData) {
    const design = puzzleData.design
    const height = design.length
    const width = design[0].length

    const colorSpec = puzzleData.colors || puzzleData.color || 0x4169e1
    const picture = puzzleData.colors && Array.isArray(puzzleData.colors)
        ? puzzleData.colors
        : generatePicture(design, colorSpec)

    const puzzle = {
        id: puzzleData.id,
        name: puzzleData.name,
        difficulty: puzzleData.difficulty,
        width: width,
        height: height,
        solution: design,
        picture: picture
    }

    const filepath = path.join(dir, filename)
    fs.writeFileSync(filepath, JSON.stringify(puzzle, null, 4) + "\n")
    console.log(`Created ${filename}: ${puzzleData.name}`)
}

// Main
const puzzleDir = path.join(__dirname, "..", "web", "puzzles")

console.log("\n=== Creating Easy (5x5) puzzles ===")
for (const [filename, data] of Object.entries(easy5x5)) {
    writePuzzle(path.join(puzzleDir, "easy"), filename, data)
}

console.log("\n=== Creating Medium (10x10) puzzles ===")
for (const [filename, data] of Object.entries(medium10x10)) {
    writePuzzle(path.join(puzzleDir, "medium"), filename, data)
}

console.log("\n=== Creating Hard (15x15) puzzles ===")
for (const [filename, data] of Object.entries(hard15x15)) {
    writePuzzle(path.join(puzzleDir, "hard"), filename, data)
}

console.log("\nDone! Run 'npm run build:puzzles' to rebuild puzzles.json")
